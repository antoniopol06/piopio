var socket=io.connect(""),globalTweets=function(){function a(a,d){switch(d){case"total":b+=a;break;case"hashtags":c+=a}b+=a}var b=0,c=0;return{increment:function(b,c){a(b,c)},getTotal:function(){return b},getHashtags:function(){return c}}}(),map=L.map("map").setView([31.653381,-39.754028],3);L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{maxZoom:18,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',id:"antoniopol06.044842e0",accessToken:"pk.eyJ1IjoiYW50b25pb3BvbDA2IiwiYSI6Ijk2MzdlYTRlYmM5YWYwMGE5MjVjMDJlNWE5ZjVkYjRkIn0.2iwi6FJE967tQCbUSoqr5A"}).addTo(map),console.log(socket),socket.on("connect",function(){console.log("user connected websockets"),socket.on("newtweet",function(a){console.log("newTweet");var b=a.user.profile_image_url,c=a.text;if(a.geo){var d=a.geo.coordinates[0],e=a.geo.coordinates[1],f=L.icon({iconUrl:b,iconSize:[20,20],iconAnchor:[22,22],popupAnchor:[-11,-11]}),g=L.marker([d,e],{icon:f}).addTo(map);g.bindPopup(c).openPopup()}globalTweets.increment(1,"total"),globalTweets.increment(a.entities.hashtags.length,"hashtags"),tweets=document.getElementById("counttweets"),hashtags=document.getElementById("counthashtags"),tweets.innerHTML=globalTweets.getTotal(),hashtags.innerHTML=globalTweets.getHashtags()})});